- name: Gather and print local facts
  # quay.io/rhn_support_nreilly/terraform-ee
  hosts: localhost
  # become: true
  gather_facts: true
  tasks:
    - name: Print facts
      ansible.builtin.debug:
        var: ansible_facts

    - name: Copy terraform module to work_dir
      ansible.builtin.copy:
        src: "{{ item }}"
        dest: "/tmp/terraform/"
        mode: "0664"
      with_items:
        - install.tf
        - provider.tf

    - name: Dump the terraform files
      ansible.builtin.shell:
        cmd: |
          cat /tmp/terraform/provider.tf
#    - name: Run terraform
#      cloud.terraform.terraform:
#        project_path: "/tmp/terraform/"
#        force_init: true
#        provider_upgrade: true
#        state: present
#      register: network_output
